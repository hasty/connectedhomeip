<?xml version="1.0"?>
<configurator>
  <bitmap name="Feature" type="bitmap32">
    <cluster code="0x0034"/>
    <field mask="0x1" name="Watermarks"/>
  </bitmap>
  <cluster>
    <attribute code="0x00" define="THREAD_METRICS" entryType="ThreadMetricsStruct" length="254" optional="true" side="server" type="ARRAY" writable="false">ThreadMetrics</attribute>
    <attribute code="0x01" default="0x0000000000000000" define="CURRENT_HEAP_FREE" max="0xFFFFFFFFFFFFFFFF" min="0x0000000000000000" optional="true" side="server" type="int64u" writable="false">CurrentHeapFree</attribute>
    <attribute code="0x02" default="0x0000000000000000" define="CURRENT_HEAP_USED" max="0xFFFFFFFFFFFFFFFF" min="0x0000000000000000" optional="true" side="server" type="int64u" writable="false">CurrentHeapUsed</attribute>
    <attribute code="0x03" default="0x0000000000000000" define="CURRENT_HEAP_HIGH_WATERMARK" max="0xFFFFFFFFFFFFFFFF" min="0x0000000000000000" optional="true" side="server" type="int64u" writable="false">CurrentHeapHighWatermark</attribute>
    <code>0x0034</code>
    <command cli="chip software_diagnostics resetwatermarks" code="0x00" name="ResetWatermarks" optional="true" source="client">
      <access op="invoke" privilege="manage"/>
      <description>Reception of this command SHALL reset the values: The StackFreeMinimum field of the ThreadMetrics attribute, CurrentHeapHighWaterMark attribute.</description>
    </command>
    <define>SOFTWARE_DIAGNOSTICS_CLUSTER</define>
    <description>The Software Diagnostics Cluster provides a means to acquire standardized diagnostics metrics that MAY be used by a Node to assist a user or Administrative Node in diagnosing potential problems.</description>
    <domain>General</domain>
    <event code="0x00" name="SoftwareFault" optional="true" priority="info" side="server">
      <description>Indicate the last software fault that has taken place on the Node.</description>
      <field id="0" name="ID" type="int64u"/>
      <field id="1" length="8" name="Name" optional="true" type="char_string"/>
      <field id="2" length="1024" name="FaultRecording" optional="true" type="octet_string"/>
    </event>
    <name>Software Diagnostics</name>
  </cluster>
  <domain name="CHIP"/>
  <struct name="ThreadMetricsStruct">
    <cluster code="0x0034"/>
    <item name="ID" type="int64u"/>
    <item length="8" name="Name" optional="true" type="char_string"/>
    <item name="StackFreeCurrent" optional="true" type="int32u"/>
    <item name="StackFreeMinimum" optional="true" type="int32u"/>
    <item name="StackSize" optional="true" type="int32u"/>
  </struct>
</configurator>
