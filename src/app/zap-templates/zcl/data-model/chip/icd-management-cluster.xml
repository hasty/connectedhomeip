<?xml version="1.0"?>
<configurator>
  <bitmap name="Feature" type="bitmap32">
    <cluster code="0x0046"/>
    <field mask="0x1" name="CheckInProtocolSupport"/>
    <field mask="0x2" name="UserActiveModeTrigger"/>
    <field mask="0x4" name="LongIdleTimeSupport"/>
  </bitmap>
  <bitmap name="UserActiveModeTriggerBitmap" type="bitmap32">
    <cluster code="0x0046"/>
    <field mask="0x1" name="PowerCycle"/>
    <field mask="0x2" name="SettingsMenu"/>
    <field mask="0x4" name="CustomInstruction"/>
    <field mask="0x8" name="DeviceManual"/>
    <field mask="0x10" name="ActuateSensor"/>
    <field mask="0x20" name="ActuateSensorSeconds"/>
    <field mask="0x40" name="ActuateSensorTimes"/>
    <field mask="0x80" name="ActuateSensorLightsBlink"/>
    <field mask="0x100" name="ResetButton"/>
    <field mask="0x200" name="ResetButtonLightsBlink"/>
    <field mask="0x400" name="ResetButtonSeconds"/>
    <field mask="0x800" name="ResetButtonTimes"/>
    <field mask="0x1000" name="SetupButton"/>
    <field mask="0x2000" name="SetupButtonSeconds"/>
    <field mask="0x4000" name="SetupButtonLightsBlink"/>
    <field mask="0x8000" name="SetupButtonTimes"/>
    <field mask="0x10000" name="AppDefinedButton"/>
  </bitmap>
  <cluster>
    <attribute code="0x00" default="1" define="IDLE_MODE_DURATION" isNullable="false" max="64800" min="1" optional="false" side="server" type="int32u" writable="false">IdleModeDuration</attribute>
    <attribute code="0x01" default="300" define="ACTIVE_MODE_DURATION" isNullable="false" optional="false" side="server" type="int32u" writable="false">ActiveModeDuration</attribute>
    <attribute code="0x02" default="300" define="ACTIVE_MODE_THRESHOLD" isNullable="false" optional="false" side="server" type="int16u" writable="false">ActiveModeThreshold</attribute>
    <attribute code="0x03" define="REGISTERED_CLIENTS" entryType="MonitoringRegistrationStruct" isNullable="false" optional="true" side="server" type="ARRAY" writable="false">
      <access op="read" privilege="administer"/>
      <description>RegisteredClients</description>
    </attribute>
    <attribute code="0x04" default="0" define="ICD_COUNTER" isNullable="false" optional="true" side="server" type="int32u" writable="false">
      <access op="read" privilege="administer"/>
      <description>ICDCounter</description>
    </attribute>
    <attribute code="0x05" default="1" define="CLIENTS_SUPPORTED_PER_FABRIC" isNullable="false" min="1" optional="true" side="server" type="int16u" writable="false">ClientsSupportedPerFabric</attribute>
    <attribute code="0x06" define="USER_ACTIVE_MODE_TRIGGER_HINT" isNullable="false" optional="true" side="server" type="UserActiveModeTriggerBitmap" writable="false">UserActiveModeTriggerHint</attribute>
    <attribute code="0x07" define="USER_ACTIVE_MODE_TRIGGER_INSTRUCTION" isNullable="false" length="128" optional="true" side="server" type="char_string" writable="false">UserActiveModeTriggerInstruction</attribute>
    <code>0x0046</code>
    <command code="0x00" isFabricScoped="true" name="RegisterClient" optional="true" response="RegisterClientResponse" source="client">
      <access op="invoke" privilege="manage"/>
      <arg name="CheckInNodeID" optional="false" type="node_id"/>
      <arg name="MonitoredSubject" optional="false" type="int64u"/>
      <arg length="16" name="Key" optional="false" type="octet_string"/>
      <arg length="16" name="VerificationKey" optional="true" type="octet_string"/>
      <description> Register a client to the end device </description>
    </command>
    <command code="0x01" disableDefaultResponse="true" name="RegisterClientResponse" optional="false" source="server">
      <arg isNullable="false" name="ICDCounter" type="int32u"/>
      <description> RegisterClient response command </description>
    </command>
    <command code="0x02" isFabricScoped="true" name="UnregisterClient" optional="true" source="client">
      <access op="invoke" privilege="manage"/>
      <arg name="CheckInNodeID" type="node_id"/>
      <arg length="16" name="VerificationKey" optional="true" type="octet_string"/>
      <description> Unregister a client from an end device </description>
    </command>
    <command code="0x03" name="StayActiveRequest" optional="true" source="client">
      <access op="invoke" privilege="manage"/>
      <description>Request the end device to stay in Active Mode for an additional ActiveModeThreshold</description>
    </command>
    <define>ICD_MANAGEMENT_CLUSTER</define>
    <description>Allows servers to ensure that listed clients are notified when a server is available for communication.</description>
    <domain>General</domain>
    <globalAttribute code="0xFFFC" side="server" value="0x0000"/>
    <globalAttribute code="0xFFFD" side="either" value="2"/>
    <name>ICD Management</name>
  </cluster>
  <domain name="CHIP"/>
  <struct isFabricScoped="true" name="MonitoringRegistrationStruct">
    <cluster code="0x0046"/>
    <item fieldId="1" isFabricSensitive="true" name="CheckInNodeID" type="node_id"/>
    <item fieldId="2" isFabricSensitive="true" name="MonitoredSubject" type="int64u"/>
  </struct>
</configurator>
