<?xml version="1.0"?>
<configurator>
  <bitmap name="Feature" type="bitmap32">
    <cluster code="0x0038"/>
    <field mask="0x1" name="TimeZone"/>
    <field mask="0x2" name="NTPClient"/>
    <field mask="0x4" name="NTPServer"/>
    <field mask="0x8" name="TimeSyncClient"/>
  </bitmap>
  <cluster>
    <attribute code="0x0000" define="UTC_TIME" isNullable="true" optional="false" side="server" type="epoch_us">UTCTime</attribute>
    <attribute code="0x0001" default="0x00" define="GRANULARITY" optional="false" side="server" type="GranularityEnum">Granularity</attribute>
    <attribute code="0x0002" default="0x00" define="TIME_SOURCE" optional="true" side="server" type="TimeSourceEnum">TimeSource</attribute>
    <attribute code="0x0003" define="TRUSTED_TIME_SOURCE" isNullable="true" optional="true" side="server" type="TrustedTimeSourceStruct">TrustedTimeSource</attribute>
    <attribute code="0x0004" define="DEFAULT_NTP" isNullable="true" length="128" optional="true" side="server" type="char_string">DefaultNTP</attribute>
    <attribute code="0x0005" define="TIME_ZONE" entryType="TimeZoneStruct" optional="true" side="server" type="ARRAY">TimeZone</attribute>
    <attribute code="0x0006" define="DST_OFFSET" entryType="DSTOffsetStruct" optional="true" side="server" type="ARRAY">DSTOffset</attribute>
    <attribute code="0x0007" default="0xFFFFFFFFFFFFFFFF" define="LOCAL_TIME" isNullable="true" optional="true" side="server" type="epoch_us">LocalTime</attribute>
    <attribute code="0x0008" default="2" define="TIME_ZONE_DATABASE" optional="true" side="server" type="TimeZoneDatabaseEnum">TimeZoneDatabase</attribute>
    <attribute code="0x0009" default="false" define="NTP_SERVER_AVAILABLE" optional="true" side="server" type="boolean">NTPServerAvailable</attribute>
    <attribute code="0x000A" define="TIME_ZONE_LIST_MAX_SIZE" max="2" min="1" optional="true" side="server" type="int8u">TimeZoneListMaxSize</attribute>
    <attribute code="0x000B" define="DST_OFFSET_LIST_MAX_SIZE" min="1" optional="true" side="server" type="int8u">DSTOffsetListMaxSize</attribute>
    <attribute code="0x000C" default="false" define="SUPPORTS_DNS_RESOLVE" optional="true" side="server" type="boolean">SupportsDNSResolve</attribute>
    <client init="false" tick="false">true</client>
    <code>0x0038</code>
    <command code="0x00" name="SetUTCTime" optional="false" source="client">
      <access op="invoke" privilege="administer"/>
      <arg name="UTCTime" type="epoch_us"/>
      <arg name="Granularity" type="GranularityEnum"/>
      <arg name="TimeSource" optional="true" type="TimeSourceEnum"/>
      <description>This command MAY be issued by Administrator to set the time.</description>
    </command>
    <command code="0x01" isFabricScoped="true" name="SetTrustedTimeSource" optional="true" source="client">
      <access op="invoke" privilege="administer"/>
      <arg isNullable="true" name="TrustedTimeSource" type="FabricScopedTrustedTimeSourceStruct"/>
      <description>This command SHALL set TrustedTimeSource.</description>
    </command>
    <command code="0x02" name="SetTimeZone" optional="true" response="SetTimeZoneResponse" source="client">
      <access op="invoke" privilege="manage"/>
      <arg array="true" name="TimeZone" type="TimeZoneStruct"/>
      <description>This command SHALL set TimeZone.</description>
    </command>
    <command code="0x03" name="SetTimeZoneResponse" optional="true" source="server">
      <arg name="DSTOffsetRequired" type="boolean"/>
      <description>Response to SetTimeZone.</description>
    </command>
    <command code="0x04" name="SetDSTOffset" optional="true" source="client">
      <access op="invoke" privilege="manage"/>
      <arg array="true" name="DSTOffset" type="DSTOffsetStruct"/>
      <description>This command SHALL set DSTOffset.</description>
    </command>
    <command code="0x05" name="SetDefaultNTP" optional="true" source="client">
      <access op="invoke" privilege="administer"/>
      <arg isNullable="true" length="128" name="DefaultNTP" type="char_string"/>
      <description>This command is used to set DefaultNTP.</description>
    </command>
    <define>TIME_SYNCHRONIZATION_CLUSTER</define>
    <description>Accurate time is required for a number of reasons, including scheduling, display and validating security materials.</description>
    <domain>General</domain>
    <event code="0x0000" name="DSTTableEmpty" optional="true" priority="info" side="server">
      <description>This event SHALL be generated when the server stops applying the current DSTOffset and there are no entries in the list with a larger ValidStarting time.</description>
    </event>
    <event code="0x0001" name="DSTStatus" optional="true" priority="info" side="server">
      <description>This event SHALL be generated when the server starts or stops applying a DST offset.</description>
      <field id="0" name="DSTOffsetActive" type="boolean"/>
    </event>
    <event code="0x0002" name="TimeZoneStatus" optional="true" priority="info" side="server">
      <description>This event SHALL be generated when the server changes its time zone offset or name.</description>
      <field id="0" name="Offset" type="int32s"/>
      <field id="1" length="64" name="Name" optional="true" type="char_string"/>
    </event>
    <event code="0x0003" name="TimeFailure" optional="false" priority="info" side="server">
      <description>This event SHALL be generated if the node has attempted to update its time, but was unable to find a good time from any source.</description>
    </event>
    <event code="0x0004" name="MissingTrustedTimeSource" optional="true" priority="info" side="server">
      <description>This event SHALL be generated if the node attempts to update its time and finds that the TrustedTimeSource is null, or the specified peer cannot be reached.</description>
    </event>
    <globalAttribute code="0xFFFD" side="either" value="2"/>
    <name>Time Synchronization</name>
    <server init="false" tick="false">true</server>
  </cluster>
  <domain name="CHIP"/>
  <enum name="StatusCode" type="enum8">
    <cluster code="0x0038"/>
    <item name="TimeNotAccepted" value="0x02"/>
  </enum>
  <enum name="GranularityEnum" type="enum8">
    <cluster code="0x0038"/>
    <item name="NoTimeGranularity" value="0x00"/>
    <item name="MinutesGranularity" value="0x01"/>
    <item name="SecondsGranularity" value="0x02"/>
    <item name="MillisecondsGranularity" value="0x03"/>
    <item name="MicrosecondsGranularity" value="0x04"/>
  </enum>
  <enum name="TimeSourceEnum" type="enum8">
    <cluster code="0x0038"/>
    <item name="None" value="0x00"/>
    <item name="Unknown" value="0x01"/>
    <item name="Admin" value="0x02"/>
    <item name="NodeTimeCluster" value="0x03"/>
    <item name="NonMatterSNTP" value="0x04"/>
    <item name="NonMatterNTP" value="0x05"/>
    <item name="MatterSNTP" value="0x06"/>
    <item name="MatterNTP" value="0x07"/>
    <item name="MixedNTP" value="0x08"/>
    <item name="NonMatterSNTPNTS" value="0x09"/>
    <item name="NonMatterNTPNTS" value="0x0A"/>
    <item name="MatterSNTPNTS" value="0x0B"/>
    <item name="MatterNTPNTS" value="0x0C"/>
    <item name="MixedNTPNTS" value="0x0D"/>
    <item name="CloudSource" value="0x0E"/>
    <item name="PTP" value="0x0F"/>
    <item name="GNSS" value="0x10"/>
  </enum>
  <enum name="TimeZoneDatabaseEnum" type="enum8">
    <cluster code="0x0038"/>
    <item name="Full" value="0x00"/>
    <item name="Partial" value="0x01"/>
    <item name="None" value="0x02"/>
  </enum>
  <struct name="TrustedTimeSourceStruct">
    <cluster code="0x0038"/>
    <item fieldId="0" name="FabricIndex" type="fabric_idx"/>
    <item fieldId="1" name="NodeID" type="node_id"/>
    <item fieldId="2" name="Endpoint" type="endpoint_no"/>
  </struct>
  <struct name="FabricScopedTrustedTimeSourceStruct">
    <cluster code="0x0038"/>
    <item fieldId="0" name="NodeID" type="node_id"/>
    <item fieldId="1" name="Endpoint" type="endpoint_no"/>
  </struct>
  <struct name="TimeZoneStruct">
    <cluster code="0x0038"/>
    <item fieldId="0" max="50400" min="-43200" name="Offset" type="int32s"/>
    <item fieldId="1" name="ValidAt" type="epoch_us"/>
    <item fieldId="2" length="64" name="Name" optional="true" type="char_string"/>
  </struct>
  <struct name="DSTOffsetStruct">
    <cluster code="0x0038"/>
    <item fieldId="0" name="Offset" type="int32s"/>
    <item fieldId="1" name="ValidStarting" type="epoch_us"/>
    <item fieldId="2" isNullable="true" name="ValidUntil" type="epoch_us"/>
  </struct>
</configurator>
